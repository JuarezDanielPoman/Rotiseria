{% extends "base/baseAdministrador.html" %}
{% block titulo %}Lista de Pedidos disponibles{% endblock %}

{% block contenido %}
{% load static %}

    <section class="container">
        
        <h3 class="text-center mt-5">LISTA DE PEDIDOS DEL DIA</h3>
        
        <form action="{% url 'Pedido:buscar_pedidos' %}" method="GET">
            <div id="custom-search-input">
                <input type="text" class="form-control" id="persona" placeholder="Ingresa codigod de pedido" name="buscar">
                <div class="input-group-">
                    <i class="icon icon-search"></i>
                    <button type="summit" class="btn btn-success" >Buscar</button>                        
                </div>   
            </div>         
        </form>       
        
        <div class="table-responsive mt-5">
            <table id="tabla-pedidos-pendientes" class="table table-striped table-bordered table-hover text-center">
        
                <thead class="table-primary color-tabla-text">
                    <tr>
                        <th onclick="ordenarTocandoColumna(0)" class="cabera-tabla">#</th>
                        <th onclick="ordenarTocandoColumna(1)" class="cabera-tabla">Cliente</th>
                        <th onclick="ordenarTocandoColumna(2)" class="cabera-tabla">Tipo de entrega</th> 
                        <th onclick="ordenarTocandoColumna(3)" class="cabera-tabla">Estado</th>
                        <th onclick="ordenarTocandoColumna(3)" class="cabera-tabla">Hora del pedido</th> 
                        <th onclick="ordenarTocandoColumna(4)" class="cabera-tabla">Hora de entrega</th>
                        <th colspan="2">Opciones</th>

                    </tr>                   
                </thead>
                <tbody>
                        {% for p in pedidos %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <!-- <td>{{p.persona.nombre}}</td> -->
                            <td><a href="#" data-toggle="modal" data-target="#ventanaModalPedido">{{p.persona.nombre}}</a></td>
                            <td>{{p.modo_entrega}}</td>
                            <td>{{p.estado_entrega}}</td>
                            <td>{{p.hora_entrega_desde|time:"H:i"}}</td>
                            <td>{{p.hora_entrega_hasta|time:"H:i"}}</td>
                            <td>
                                <form method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="id" value="{{ p.cod_pedido }}"> 
                                    <!-- Editar -->
                                    <a href="{% url 'Pedido:pedidoadmin_edit' p.cod_pedido %}" class="btn btn-warning"><i class="fa-solid fa-file-pen"></i></a>
                                    <!-- <button class="btn-sample btn btn-danger"><a href="{% url 'Pedido:pedidoadmin_edit' p.cod_pedido %}" class="hvr-underline-from-center menu__link hvr-icon-fade" data-toggle="modal" > Editar</a></button> -->
                                </form>
                            </td>
                        </tr>
                        

                        <section id="seccion-pedido">
                            <div class="modal fade" id="ventanaModalPedido" tabindex="-1" role="dialog" aria-labelledby="titulo-ventana" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        
                                        <div class="modal-header">
                                            <h5 id="titulo-ventana" class="text-center">Datos del Cliente</h5>
                                            <button class="close" data-dismiss="modal" aria-label="Cerrar"><span aria-hidden="true"></span>X</button>
                                        </div>
                                
                                        <div class="modal-body">
                                            <div class="card col-auto p-3 formulario"> 
                                                <div class="mb-2">
                                                    <form action="#" method="post">
                                                        <fieldset>
                                                            
                                                            <div class="col-auto mb-2">
                                                                <label class="form-text">Cuil: <span> {{ p.persona.cuil }} </span></label>                                                
                                                            </div>

                                                            <div class="col-auto mb-2">
                                                                <label class="form-text">Nombre: <span> {{ p.persona.nombre }} </span> </label>
                                                            </div>
                                
                                                            <div class="col-auto mb-2">
                                                                <label class="form-text">Apellido: <span> {{ p.persona.apellido }} </span></label>                                                
                                                            </div> 
                                                            <div class="col-auto mb-2">
                                                                <label class="form-text">Domicilio: <span> {{ p.persona.domicilio }} </span></label>
                                                            </div>
                                                        </fieldset>
                                                    </form>
                                            </div>
                                            </div>
                                        </div>
                                
                                        <div class="modal-footer">
                                            <span><a href="#" class="btn btn-warning">Cancelar</a></span>
                                            <button class="btn btn-success" type="button">Guardar</button>
                                        </div>
                                    </div>
                                </div>    
                            </div>
                        </section>
                        
                    {% endfor%}                         
                </tbody>
            </table>
        </div>
    </section>
    

    <script src="{% static 'js/ordenarPedidos.js' %}"></script>

    {% endblock %}
