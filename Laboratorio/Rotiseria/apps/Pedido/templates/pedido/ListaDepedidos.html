{% extends "base/baseCadete.html" %}
{% block titulo %}Lista de Pedidos disponibles{% endblock %}

{% block contenido %}
{% load static %}
{% if perms.Pedido.view_pedido %}

<section class="container">
    <h3 class="text-center mt-5">LISTA DE PEDIDOS DEL DIA</h3>
    <form action="#" method="get">
        <input type="text" name="charSearch" size="20" class="formulario" value="">
        <span class="headerList_searchButton">
        <input class="btn-sample" type="submit" value="Buscar" class="btn button"></span></form>
    </form>
    <div class="table-responsive mt-5">
        <table id="tabla-pedidos-pendientes" class="table table-dark table-striped table-bordered table-hover text-center">
            <caption style="color: rgb(253, 253, 253);background:#323131">Listado de pedidos pendientes </caption>
            <thead class="table bg-dark text-white">
                <tr>
                    <th onclick="ordenarTocandoColumna(0)" class="cabera-tabla">#</th>
                    <th onclick="ordenarTocandoColumna(1)" class="cabera-tabla">Cliente</th>
                    <th onclick="ordenarTocandoColumna(2)" class="cabera-tabla">Tipo de entrega</th> 
                    <th onclick="ordenarTocandoColumna(3)" class="cabera-tabla">Estado</th>     
                    <th onclick="ordenarTocandoColumna(4)" class="cabera-tabla">Hora de entrega</th>
                    <th colspan="2">Opciones</th>

                </tr>                   
            </thead>
            <tbody>
                <tr>
                    {% for p in pedidos %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>{{p.persona}}</td>
                        <td>{{p.modo_entrega}}</td>
                        <td>{{p.estado_entrega}}</td>
                        <td>{{p.hora_entrega_hasta|time:"H:i"}}</td>
                        <td>
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="id" value="{{ p.cod_pedido }}">
                            <!-- Editar -->
                            <a href="{% url 'Pedido:edit_pedido' p.cod_pedido %}" class="btn btn-warning"><i class="fa-solid fa-file-pen"></i></a>
                            <!-- <button class="btn-sample btn btn-danger"><a href="{% url 'Pedido:edit_pedido' p.cod_pedido %}" class="hvr-underline-from-center menu__link hvr-icon-fade" data-toggle="modal" > Editar</a></button> -->
                        </form>
                        </td>
                    </tr>
                    <!-- data-target="#ventanaModalPedido" -->
                {% endfor%}                         
            </tbody>
            <!--<tfoot><td>Total de pedidos</td></tfoot>-->
        </table>
    </div>
</section>
<section id="seccion-pedido">
    <div class="modal fade" id="ventanaModalPedido" tabindex="-1" role="dialog" aria-labelledby="titulo-ventana" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="titulo-ventana" class="text-center">Datos del Pedido</h5>
                    <button class="close" data-dismiss="modal" aria-label="Cerrar"><span aria-hidden="true">Ã—</span></button>
                </div>
        
                <div class="modal-body">
                    <div class="card col-auto p-3 formulario"> 
                        <div class="mb-2">
                            <form action="#" method="post">
                                <fieldset>
                                    
                                    <div class="col-auto mb-2">
                                        <label class="form-text">Nombre: <span>{{p.persona.nombre}}</span> </label>
                                    </div>
        
                                    <div class="col-auto mb-2">
                                        <label class="form-text">Apellido: <span>{{p.persona.apellido}}</span></label>                                                
                                    </div> 
                                    <div class="col-auto mb-2">
                                        <label class="form-text">Tipo de entrega: <span>Local</span></label>
                                    </div>
        
                                    <div class="col-auto mb-2">
                                        <label class="form-text">Estado: <span>Pendiente</span></label>                                                
                                    </div>
                                    <div class="col-auto mb-2">
                                        <label class="form-text">Hora de entrega: <span>{{p.hora_entrega_hasta|time:"H:i"}}</span></label>                                                
                                    </div>

                                    <div class="col-auto mb-2">
                                        <label class="form-text">Domicilio: <span>Valleviejo Paclin y Ambato</span></label>                                                
                                    </div>
                                    <div class="col-auto mb-2">
                                        <label class="form-text" for="comentario">Ingresar comentario:</label><br>
                                        <textarea class="form-control" required="" placeholder="Ingrese un comentario" name="comentario" id="comentario" cols="30" rows="10"></textarea>                                        </div>
                                </fieldset>
                            </form>
                      </div>
                    </div>
                </div>
        
                <div class="modal-footer">
                    <span><a href="../templates/ListaDePedidos.html" class="btn btn-warning">Cancelar</a></span>
                    <button class="btn btn-success" type="button">Guardar</button>
                </div>
            </div>
        </div>    
    </div>
</section>
    <script src="{% static 'js/ordenarPedidos.js' %}"></script>
{% endif%}
    {% endblock %}
